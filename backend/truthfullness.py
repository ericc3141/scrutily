import re
import numpy as np
import os


tokens = {}
def get_value(text):
    #print(text)
    dirname = os.path.dirname(__file__)
    filename = os.path.join(dirname, 'vanillamodel.txt')

    percp=open(filename, 'r+')
    f=percp.read()
    first_line = f.split("\n")[0]
    with open(filename,'r') as fi:
        percpmodelWords=fi.readlines()[1:]
    b2=first_line.split(",")[0].split(":")[1]

    for i in range(1,len(percpmodelWords)):
        words=re.sub('\n','',percpmodelWords[i]).split(",")
        tokens[words[0]] = words[1]
    specialChars='!|@|#|%|\^|&|\*|\(|\)|_|\'|\?|<|>|~|`|:|$|-|\+|=|\|\[|\]|{|}|;|/|"|\.|,|\n|“|’|”|||—'
    unwantedWords=['fashion','took','best','west','story','family','pregnancy','beyonc','woman','film','girls','giudice','instagram','big','drake','wednesday','award','show','since','years','love','together','people','lip','skin','water','spent','year','nine','most','picture','really','three','singer','blue','day','february','clooney','fun','post','between','things','rumors','hands','makeup','started','real','included','alone','special','myself','bay','weekend','aside','prison','editor','alas','side','along','look','relationship','moved','wrote','went','earlier','previously','yes','later','confirmed','lyrics','students','celebrities','photo','nice','wests','affleck','arrived','mert','piggott','talk','york','has','magazine','news','life','far','some','following','wasnt','dont','photograph','reached','right','tour','keeping','chrissy','bit','songs','internet','began','normal','september','received','among','tuesday','swifts','account','growing','worlds','albums','milo','styled','outfit','recalls','emotional','more','but','call','those','know','pregnant','sure','believe','friendly','pair','week','world','want','talks','share','prenup','stand','jacket','spring','working','wear','including','appearance','shot','models','representative','recently','members','played','night','quite','summer','announcement','project','road','followed','clip','win','league','depression','financial','term','syrian','banks','fans','thing','coming','seemingly','might','mom','report','child','entire','make','own','stars','says','degeneres','needed','stewart','latest','inspired','center','actual','october','certainly','releases','sunday','red','artist','company','thursday','captioned','image','mostly','small','beautiful','lunch','declared','runway','families','lead','celebrate','facebook','nation','title','blessed','rouge','federal','transformers','refugees','voting','happy','produced','probably','filed','time','according','before','set','season','happened','online','moment','kind','kid','lot','bring','via','enough','house','excited','role','director','personal','attention','gets','line','likes','brought','became','health','singing','announced','fan','cookbook','called','rumor','start','peace','boyfriend','sorry','black','kourtney','sheer','worked','country','filing','january','pick','war','complaint','amazing','version','double','daughter','august','face','welcome','itself','access','ahead','beauty','rumours','sad','regular','step','camera','mansion','carpet','ceremony','gorgeous','fillers','bringing','general','connection','motion','annual','america','training','blood','kidman','chaos','silence','seeking','opened','cute','begin','hang','served','photographs','computer','factor','cannes','visual','genocide','science','countrys','remote','creative','hill','blanket','steele','across','married','seen','films','awards','feel','exwife','baby','return','sisters','fame','eye','means','cake','weekly','down','currently','tabloid','body','society','turns','point','choice','reports','fighting','realized','spotted','pictures','dating','games','wore','inauguration','design','help','intention','hospitalization','mental','less','tv','congratulations','born','feeling','challenge','question','someone','half','details','drawn','reason','song','else','room','shared','blond','designer','jeans','local','girl','famously','youve','act','chose','solid','globes','talked','incredibly','significant','problems','reaction','gift','shows','billboard','nominations','original','suit','squad','longtime','speculation','statements','connected','important','cameron','premiere','seven','filmmaker','university','transgender','hollywoods','shaking','onto','watch','dream','editors','appeared','literally','eyes','holding','persona','careful','tears','reach','soul','caught','suddenly','putin','maples','land','independent','board','vision','natural','naturally','questions','bee','subject','wherever','somebody','vehicle','womens','lauren','hart','push','theories','forbes','hillsong','parole','program','draw','kissed','afflecks','posing','crisis','spokesman','marie','claire','shamed','casting','affect','collection','cudi','hashtag','speculate','testing','exchange','occasionally','becomes','switch','hosted','commercial','radaronline','glimpse','describes','punk','daytoday','percentage','cup','civil','tiffany','thankyou','schools','este','lauder','appointment','available','refugee','education','creamywhite','missions','materials','transfer','institutions','artificial','higher','technology','nintendo','twofactor','authentication','toyota','leggings','pitt','back','days','decade','expecting','pda','super','honestly','looking','made','ready','rooms','limited','knows','sometimes','oped','view','herself','yeah','behind','written','throughout','status','worth','whether','million','business','site','thriller','media','complicated','putting','friday','dark','pablo','explained','cosmetics','donda','retail','video','fast','part','finale','executive','forward','teigen','yeezy','social','features','better','variety','shut','confirm','guess','liked','campaign','explaining','young','feud','industry','selena','unfortunately','packing','sit','showed','laughing','character','quote','gomezs','juice','missing','eventually','speech','older','separate','custom','florida','dropped','prime','stands','faith','county','investigators','actors','bye','tea','staying','voice','viewers','honor','form','relationships','result','biebers','posts','town','generation','space','holmes','suri','grow','playing','article','closed','manhattan','lawyer','biological','shed','diana','ride','crying','bays','tests','raised','investigation','bar','remains','backing','englands','bound','uk','car','manager','international','raising','elaborate','celebrating','captured','thank','painful','numerous','uses','rosie','rock','sneakers','answers','kendall','stepped','ellens','opening','reeves','gathering','mad','possibly','supermodel','kiss','awardwinning','transformed','bloom','chatting','dog','odd','completed','reputation','sitting','trade','referring','associated','email','awareness','recall','robin','charming','darker','rumoured','vladimir','barely','bank','response','lucky','feelings','memoir','risk','note','intended','shower','leaders','wine','tweeted','debut','camp','caitlyn','develop','afternoon','admitting','knowledge','moments','grand','garner','everyday','cait','honey','spielberg','eight','conspiracy','joked','related','traditional','lachey','leader','portrayal','convention','serving','violence','sits','itll','sang','alltime','recognition','attends','caitlyns','jason','pic','swimming','orphanages','childless','ourselves','throw','faced','newly','ensemble','pieces','couture','tweets','interrupted','mtv','extend','superstars','baldwin','arrive','kitchen','episodes','meme','fire','personalized','mobile','brands','headlined','gray','complex','administration','lineup','extended','machine','brave','bureau','garden','decked','styling','hiddleswift','skinny','duty','typical','apply','except','flash','owned','surely','district','referencing','astley','chen','latenight','printed','packer','hydrating','extra','influential','crimes','transform','citys','visitors','blogs','ads','yolanda','uh','mcadams','library','backed','committing','healing','risks','investment','essential','ourian','launches','isthe','ventimiglias','simmons','nationwide','typically','sprint','relief','mothermanaging','groundbreaking','product','delicate','taunting','workers','draft','enemies','chinese','saythe','fort','glorious','skarsgrd','mission','burgeoning','frankfurt','musk','cables','microsoft','spelling','ipo','economists','revised','hints','reunion','maybe','studio','texting','sides','petty','single','discussing','moonlight','reasons','long','wish','spoken','directly','weve','food','smoking','dealing','peoples','gained','south','brother','decision','drive','come','number','pain','reveals','six','contact','ex','comes','web','sparked','conversation','daily','wrong','gone','away','middle','thinking','strange','stomach','piece','freedom','going','proud','makes','maddox','knox','request','agreement','multiple','ability ','able ','above ','absence ','absolute ','absolutely ','abused ','accomplish ','accounts ','accusations ','acting ','action ','actor ','added ','addition ','additional ','adds ','admiration ','admire ','adopt ','adoption ','advanced ','advised ','affair ','affected ','afraid ','against ','age ','agreed ','agut ','ai ','aid ','air ','airbus ','alleged ','allegedly ','alleges ','alleging ','almost ','although ','always ','amazon ','amount ','angeles ','animosity ','announcing ','antics ','antisocial ','anymore ','anyone ','anything ','anytime ','anywhere ','apology ','appear ','appearances ','apple ','applications ','appointed ','area ','arguments ','arod ','around ','arrested ','articles ','ashamed ','asked ','asking ','aspen ','assuming ','athletes ','attack ','attacks ','attended ','attorney ','auction ','avid ','bad ','ball ','band ','banned ','basketball ','battle ','beatles ','begged ','beginning ','behavior ','being ','below ','belted ','bid ','big ','biggest ','bill ','billion ','birth ','birthday ','blake ','blame ','blast ','blind ','blow ','boerses ','bonding ','border ','bosses ','both ','bottom ','box ','boy ','brads ','breakdown ','breaking ','brewdog ','bright ','broadcast ','bucket ','buckingham ','buddy ','building ','burn ','businessman ','butt ','button ','buy ','buying ','buzz ','calling ','calls ','campbell ','can ','canada ','canadians ','cancel ','cancelled ','candidate ','cannot ','carriers ','cars ','case ','caused ','cdl ','celeb ','celebrity ','celebs ','century ','chances ','change ','changed ','changing ','charges ','charity ','chat ','check ','chick ','children ','childrens ','china ','chorus ','circle ','city ','claim ','claimed ','claiming ','claims ','clear ','clearly ','close ','club ','clues ','cnn ','colleagues ','colors ','combined ','comment ','commented ','comments ','commercials ','common ','communications ','companies ','compensation ','competed ','complaints ','complete ','concerned ','concerns ','concert ','concertgoers ','conducted ','conference ','confirms ','congress ','considering ','content ','continue ','continues ','controversy ','convince ','cop ','cost ','couldnt ','couple ','crash ','crazy ','create ','created ','creationism ','credit ','critics ','crowd ','curse ','custody ','customers ','cut ','dad ','daddy ','dangerous ','dated ','daze ','deal ','deals ','death ','decide ','decided ','declined ','deep ','deeply ','definitely ','delayed ','demands ','democrats ','department ','depressed ','deputy ','deserve ','desperate ','die ','died ','differences ','direction ','dirty ','disappointing ','discovered ','distance ','ditch ','diva ','divorce ','dna ','do ','documents ','doesnt ','dollars ','dominate ','donald ','done ','doubt ','drivers ','driving ','drug ','drugs ','duchess ','due ','duke ','during ','each ','eagles ','early ','echoed ','edinburgh ','effect ','eggs ','either ','elected ','elsa ','emotionally ','empire ','employees ','end ','endured ','engaged ','enjoyed ','enquirer ','entirely ','episode ','escorted ','especially ','estranged ','event ','events ','everyone ','evidence ','exclusively ','expert ','explode ','explosive ','extensions ','extremely ','fair ','fake ','faked ','famous ','faris ','fear ','feared ','featuring ','fed ','feels ','felix ','fellow ','felt ','female ','feuding ','few ','fight ','find ','finishes ','five ','fka ','flew ','flight ','flights ','fling ','flying ','focused ','forced ','former ','formula ','found ','fourth ','franchise ','free ','friend ','friends ','friendship ','froze ','fulfilled ','fully ','fundraiser ','further ','future ','game ','gender ','getty ','giant ','given ','goal ','goes ','good ','google ','got ','grab ','graffiti ','great ','grounds ','groups ','guide ','hair ','hand ','happen ','happening ','happier ','harry ','harvey ','hated ','haters ','hbo ','head ','healthy ','heard ','heartbroken ','hearted ','heartfelt ','heavy ','helped ','hidden ','hired ','hit ','hold ','homeland ','horrendous ','horrible ','hospital ','hosts ','hot ','hotel ','household ','however ','human ','hunger ','husband ','idea ','ignored ','illegal ','illness ','impressive ','improved ','incident ','increase ','incredible ','indeed ','indicating ','information ','injured ','injury ','inner ','insider ','insiders ','instead ','interested ','interview ','intimate ','invention ','invited ','issue ','issues ','items ','itshe ','jealous ','jewelry ','jobs ','joined ','judge ','kept ','kids ','knicks ','lack ','lady ','laptop ','las ','late ','latin ','laundry ','laundryit ','laws ','leaning ','learned ','least ','leave ','leaving ','left ','legs ','lesbian ','let ','lies ','lindsay ','lindsey ','listen ','listening ','lived ','lives ','london ','londons ','lonely ','longer ','looks ','los ','loss ','loved ','lover ','loving ','low ','magazines ','mailonline ','major ','making ','maks ','male ','manufacturing ','many ','mar ','marriage ','marry ','mars ','mask ','match ','may ','mcilroy ','meanwhile ','medical ','meek ','meet ','member ','men ','mentioned ','miami ','miles ','millions ','minute ','minutes ','miss ','misses ','model ','modern ','moms ','monarchy ','money ','mother ','move ','movie ','naked ','name ','named ','names ','national ','nations ','nba ','near ','need ','needs ','nervous ','network ','new ','nobody ','non ','none ','nose ','not ','noted ','nothing ','noticed ','now ','nowhere ','nuclear ','nycs ','obama ','obamacare ','observers ','obvious ','occasions ','odom ','off ','offered ','offering ','ofshe ','often ','ok ','old ','operates ','options ','order ','originally ','orphanage ','others ','outspoken ','over ','paid ','pal ','palace ','palm ','panic ','papers ','paraguay ','park ','parker ','partner ','parts ','pass ','passed ','passengers ','past ','paternity ','pattinson ','pauls ','pence ','percent ','perfect ','perform ','pfeiffer ','philadelphia ','photographed ','physically ','pirates ','plan ','planes ','planning ','plans ','plays ','plenty ','pockets ','pointing ','policy ','poll ','porn ','portray ','portrayed ','posed ','position ','positions ','possible ','power ','precious ','present ','president ','press ','pretty ','previous ','private ','problem ','process ','products ','professional ','promoting ','prove ','publicity ','publicly ','put ','quickie ','quickly ','quit ','radar ','radaronlinecom ','ran ','ranked ','rant ','rapid ','rarely ','rather ','rating ','reality ','recent ','reconnect ','record ','recording ','recount ','recovered ','referenced ','reign ','relying ','remarked ','removed ','reported ','reportedly ','respect ','responsibility ','rest ','retire ','reveal ','revealed ','reviews ','reynolds ','ring ','rival ','rivalry ','robbed ','robbery ','rocked ','roger ','romantic ','roof ','royal ','running ','runs ','rushing ','saidin ','sale ','same ','sarath ','sat ','saying ','scared ','scary ','scene ','scenes ','school ','screen ','seals ','secret ','secretary ','secretly ','section ','security ','see ','seeing ','seek ','seem ','seemed ','seems ','self ','selfish ','selfproclaimed ','send ','series ','seriously ','serve ','service ','services ','sex ','sexiest ','sexual ','sexy ','shaming ','shell ','shirt ','shocked ','shocking ','should ','showbiz ','shown ','singers ','sir ','sites ','situation ','skarsgard ','skills ','sleep ','slowly ','smartwatch ','snapped ','solar ','soon ','sort ','souq ','source ','spanning ','spark ','speak ','speculating ','spell ','spend ','spending ','spends ','spokesperson ','sports ','spot ','spread ','staff ','star ','starr ','state ','stated ','stayed ','stein ','stepping ','still ','stock ','stop ','stranger ','streaming ','stress ','stricter ','strike ','strippers ','strong ','stunned ','success ','successful ','successor ','such ','sue ','suffered ','suggested ','suggesting ','sun ','superstar ','support ','supposed ','supposedly ','surprise ','surprising ','surrounding ','sweater ','sweet ','tablets ','tabloids ','take ','takeover ','taking ','talking ','tape ','taxes ','tay ','team ','teams ','tell ','telling ','tells ','temporary ','ten ','test ','thanksgiving ','think ','thinks ','thinning ','thought ','thoughts ','thrilled ','tiafore ','ticket ','times ','tired ','today ','tom ','tonight ','top ','topic ','totally ','touch ','tragedy ','transition ','traumatic ','traveling ','triggered ','trip ','trips ','trouble ','truly ','trump ','truth ','trying ','turned ','twigs ','twilight ','twins ','ultimate ','unable ','under ','united ','unknown ','unnamed ','until ','updates ','upset ','use ','vacation ','vanity ','vegas ','vestager ','vice ','victims ','victory ','voted ','vowed ','waiting ','wake ','wall ','wanted ','wants ','washington ','way ','ways ','wealthy ','weapons ','wears ','website ','weed ','weeks ','weight ','westinghouse ','whatever ','while ','whisked ','white ','whites ','whoa ','whole ','whopping ','widespread ','wife ','willing ','wings ','wiretapped ','without ','women ','womenshe ','wondering ','wont ','work ','works ','worried ','wouldve ','younger ','youtube']
    fileContent=text.lower()
    fileContent=re.sub('\d','',fileContent)
    fileContent=re.sub(specialChars,'',fileContent)
    fileWords=fileContent.split()
    val2=0
    for fileWord in fileWords:
        if fileWord in unwantedWords:
            if tokens.get(fileWord):
                val2+=float(tokens.get(fileWord))
    val2+=float(b2)
    sigmoid=round(0.5*(1+round(np.tanh(.5 * val2),3)),3)
    return sigmoid